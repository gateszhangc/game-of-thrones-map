# 《权力的游戏》地图整合方案 - 页面布局线框图

## 网站功能分析（基于 Chrome DevTools 实际研究）

### maps.wikiofthrones.com 实际架构
**技术栈**:
- **地图库**: Leaflet.js v1.9.4
- **前端框架**: 原生 JavaScript (无 React/Vue)
- **字体**: Lato (正文), MedievalSharp (标题)
- **背景色**: #333 (深灰)

**核心组件**:
1. **地图容器** (`.map-container`)
   - 全屏显示 (1536x730px)
   - Leaflet 标准图层结构
   - 支持触摸缩放和拖拽

2. **搜索组件** (`.search-container`)
   - 位置: 绝对定位 (69x64px)
   - 包含搜索输入框和结果列表
   - Placeholder: "Search..."

3. **信息面板** (`.info-container`)
   - 尺寸: 500x438px
   - 绝对定位，可能从侧边滑出
   - 包含标题、内容和页脚区域

4. **API 端点**:
   - `/api/kingdoms` - 王国数据
   - `/api/locations/castle` - 城堡
   - `/api/locations/city` - 城市
   - `/api/locations/town` - 城镇
   - `/api/locations/ruin` - 废墟
   - `/api/locations/region` - 地区
   - `/api/locations/landmark` - 地标

### thegameofthrones.com 现有特点
- **静态展示**: 精美的视觉设计
- **信息丰富**: 详细的世界观介绍
- **响应式布局**: 适配多种设备

---

## 页面布局线框图

```
┌─────────────────────────────────────────────────────────────────┐
│                         顶部导航栏                                │
│  [Logo] [首页] [地图] [家族] [时间线] [关于]          [搜索🔍]    │
└─────────────────────────────────────────────────────────────────┘
│
├─ 首页 (保留原站点风格)
│  ┌───────────────────────────────────────────────────────────┐
│  │                                                             │
│  │                    英雄横幅区域                              │
│  │              (原站点的精美背景图)                            │
│  │                                                             │
│  │              [探索交互式地图 →]                              │
│  │                                                             │
│  ├───────────────────────────────────────────────────────────┤
│  │                                                             │
│  │                  世界介绍内容                                │
│  │            (保留原站点的所有内容)                            │
│  │                                                             │
│  └───────────────────────────────────────────────────────────┘
│
└─ 交互式地图页面 (新增)
   ┌───────────────────────────────────────────────────────────┐
   │ ┌─────────┐                                   ┌─────────┐ │
   │ │         │                                   │         │ │
   │ │  侧边栏  │         主地图区域                 │  信息面板 │ │
   │ │         │      (Leaflet 地图)               │         │ │
   │ │ ┌─────┐ │                                   │ ┌─────┐ │ │
   │ │ │搜索 │ │   ┌─────────────────────────┐    │ │地点 │ │ │
   │ │ └─────┘ │   │                         │    │ │详情 │ │ │
   │ │         │   │      🗺️                 │    │ │     │ │ │
   │ │ 筛选器:  │   │                         │    │ │图片 │ │ │
   │ │ □ 城堡  │   │    维斯特洛大陆           │    │ │     │ │ │
   │ │ □ 城市  │   │                         │    │ │描述 │ │ │
   │ │ □ 地标  │   │      📍 📍 📍           │    │ │     │ │ │
   │ │ □ 战场  │   │                         │    │ │相关 │ │ │
   │ │         │   │                         │    │ │链接 │ │ │
   │ │ 家族:    │   └─────────────────────────┘    │ └─────┘ │ │
   │ │ □ 史塔克 │                                   │         │ │
   │ │ □ 兰尼斯特│   [+ 放大] [- 缩小] [🧭 重置]     │ [关闭×] │ │
   │ │ □ 坦格利安│                                   │         │ │
   │ │ ...     │                                   │         │ │
   │ │         │                                   │         │ │
   │ │ 地点列表: │                                   │         │ │
   │ │ • 临冬城 │                                   │         │ │
   │ │ • 君临城 │                                   │         │ │
   │ │ • 龙石岛 │                                   │         │ │
   │ │ ...     │                                   │         │ │
   │ └─────────┘                                   └─────────┘ │
   └───────────────────────────────────────────────────────────┘
```

---

## 详细布局说明

### 1. 顶部导航栏 (固定)
```
┌─────────────────────────────────────────────────────────────────┐
│ [🏰 GoT Map]  [首页] [交互地图] [家族] [时间线]    [🔍 搜索地点] │
└─────────────────────────────────────────────────────────────────┘
高度: 60px
背景: 半透明深色 (rgba(0,0,0,0.8))
字体: MedievalSharp (保持主题风格)
```

### 2. 左侧边栏 (可折叠)
```
┌─────────────┐
│ [☰ 折叠]    │
├─────────────┤
│ 🔍 搜索框    │
│ ┌─────────┐ │
│ │输入地点  │ │
│ └─────────┘ │
├─────────────┤
│ 筛选器       │
│             │
│ 地点类型:    │
│ ☑ 城堡      │
│ ☑ 城市      │
│ ☑ 城镇      │
│ ☐ 废墟      │
│ ☐ 战场      │
│             │
│ 家族:        │
│ ☑ 史塔克    │
│ ☑ 兰尼斯特  │
│ ☑ 坦格利安  │
│ ☐ 拜拉席恩  │
│ ☐ 提利尔    │
│ [更多...]   │
│             │
│ 地区:        │
│ ☑ 北境      │
│ ☑ 河间地    │
│ ☐ 西境      │
│ [更多...]   │
├─────────────┤
│ 地点列表     │
│ (滚动)      │
│             │
│ 📍 临冬城   │
│ 📍 君临城   │
│ 📍 龙石岛   │
│ 📍 鹰巢城   │
│ ...         │
└─────────────┘
宽度: 280px (展开) / 0px (折叠)
背景: 羊皮纸纹理
```

### 3. 主地图区域
```
┌─────────────────────────────────────┐
│                                     │
│         Leaflet 交互式地图           │
│                                     │
│  • 可缩放 (滚轮/双指)                │
│  • 可拖拽                            │
│  • 自定义地图瓦片 (维斯特洛地图)      │
│  • 标记点 (Markers)                 │
│  • 弹出窗口 (Popups)                │
│  • 工具提示 (Tooltips)              │
│                                     │
│  控制按钮 (右下角):                  │
│  [+] 放大                           │
│  [-] 缩小                           │
│  [🧭] 重置视图                       │
│  [📐] 测距工具                       │
│  [🗺️] 图层切换                      │
│                                     │
└─────────────────────────────────────┘
占据剩余空间
背景: 海洋纹理
```

### 4. 右侧信息面板 (按需显示)
```
┌─────────────────┐
│ 临冬城      [×] │
├─────────────────┤
│                 │
│  [城堡图片]     │
│                 │
├─────────────────┤
│ 📍 位置: 北境   │
│ 🏰 类型: 城堡   │
│ 👑 家族: 史塔克 │
│                 │
│ 📖 描述:        │
│ 临冬城是北境的   │
│ 首府，史塔克家族 │
│ 的世代居所...   │
│                 │
│ 🎬 重要事件:    │
│ • 第1季第1集    │
│ • 第8季第3集    │
│                 │
│ 🔗 相关链接:    │
│ • 史塔克家族    │
│ • 北境地图      │
│                 │
│ [查看详情 →]    │
│                 │
└─────────────────┘
宽度: 320px
背景: 羊皮纸纹理
动画: 从右侧滑入
```

### 5. 地图标记样式
```
标记类型:
🏰 城堡 - 红色图标
🏛️ 城市 - 蓝色图标
🏘️ 城镇 - 绿色图标
⚔️ 战场 - 橙色图标
🏚️ 废墟 - 灰色图标
🌲 地标 - 紫色图标

标记状态:
• 默认: 半透明
• 悬停: 放大 + 高亮
• 选中: 完全不透明 + 脉冲动画
• 筛选隐藏: 淡出
```

---

## 响应式布局

### 桌面端 (>1200px)
```
[侧边栏 280px] [地图 flex-1] [信息面板 320px]
```

### 平板端 (768px - 1200px)
```
[侧边栏 折叠] [地图 100%] [信息面板 覆盖在地图上]
```

### 移动端 (<768px)
```
[地图 100%]
[底部抽屉: 搜索 + 筛选]
[信息面板: 全屏模态框]
```

---

## 技术实现要点

### 前端技术栈
- **地图库**: Leaflet.js (轻量、灵活)
- **地图瓦片**: 自定义维斯特洛地图切片
- **标记数据**: JSON 格式存储地点信息
- **UI 框架**: React (与 Next.js 集成)
- **状态管理**: React Context / Zustand
- **样式**: Tailwind CSS + 自定义主题

### 数据结构示例
```json
{
  "locations": [
    {
      "id": "winterfell",
      "name": "临冬城",
      "nameEn": "Winterfell",
      "type": "castle",
      "house": "stark",
      "region": "north",
      "coordinates": [54.5, -6.0],
      "description": "北境的首府...",
      "image": "/images/locations/winterfell.jpg",
      "events": ["s1e1", "s8e3"],
      "relatedLinks": [...]
    }
  ]
}
```

### 路由结构
```
/                    - 首页 (原站点内容)
/map                 - 交互式地图
/map/:locationId     - 地图 + 选中特定地点
/houses              - 家族页面
/timeline            - 时间线页面
```

---

## 用户交互流程

1. **进入首页** → 看到精美的原站点内容
2. **点击"探索地图"** → 进入交互式地图页面
3. **浏览地图** → 缩放、拖拽、探索
4. **使用筛选器** → 按类型/家族/地区筛选
5. **搜索地点** → 快速定位
6. **点击标记** → 查看地点详情
7. **深入了解** → 点击"查看详情"进入专门页面

---

## 视觉风格统一

### 配色方案
- **主色**: #1a1a1a (深黑)
- **次色**: #8b7355 (古铜)
- **强调色**: #c9a961 (金色)
- **背景**: 羊皮纸纹理
- **文字**: #2c2416 (深棕)

### 字体
- **标题**: MedievalSharp (中世纪风格)
- **正文**: Lato (易读性)
- **地图标签**: Cinzel (优雅)

### 动画效果
- 标记弹跳进入
- 面板滑动展开
- 悬停放大效果
- 平滑缩放过渡

---

## 性能优化

1. **地图瓦片**: 使用 CDN 加速
2. **标记聚合**: 缩小时合并密集标记
3. **懒加载**: 按需加载地点详情
4. **图片优化**: WebP 格式 + 响应式图片
5. **代码分割**: 地图组件独立打包

---

## 开发优先级

### Phase 1 - MVP (最小可行产品)
- [ ] 基础 Leaflet 地图集成
- [ ] 显示主要城堡标记 (10-20个)
- [ ] 简单的信息弹窗
- [ ] 基础搜索功能

### Phase 2 - 增强功能
- [ ] 完整的地点数据库 (100+)
- [ ] 侧边栏筛选器
- [ ] 详细信息面板
- [ ] 响应式布局

### Phase 3 - 高级特性
- [ ] 图层切换 (不同时期)
- [ ] 路径绘制 (角色旅程)
- [ ] 3D 视图切换
- [ ] 用户收藏功能
